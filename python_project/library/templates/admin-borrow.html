{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo phiếu mượn — Admin Borrow</title>
    <link rel="stylesheet" href="{% static 'css/admin-borrow.css' %}?v={{ timestamp }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5. 0/css/all.min.css">
</head>

<body>
<div class="page-container">
    <!-- Main two-column layout -->
    <main class="borrow-layout">

        <!-- LEFT SIDE – Borrow Ticket -->
        <div class="ticket-card card">
            <h2 class="section-title">Thông tin phiếu mượn</h2>

            <label for="user-id">User ID:</label>
            <input id="user-id" type="text" placeholder="Nhập User ID..." />

            <label for="borrow-date">Ngày mượn:</label>
            <input id="borrow-date" type="date" value="{{ today_date }}" />

            <label for="return-date">Ngày trả dự kiến:</label>
            <input id="return-date" type="date" />

            <h3 class="borrow-info-title">Thông tin mượn</h3>
            <ul class="borrow-list-ul">
                <!-- Filled by JS when admin adds books -->
            </ul>

            <button class="confirm-btn">Xác nhận tạo phiếu</button>
        </div>

        <!-- RIGHT SIDE – Book Search -->
        <div class="search-card card">
            <h2 class="section-title">Tìm sách</h2>

            <div class="search-box">
                <input id="book-search" type="text" placeholder="Nhập Book ID hoặc tên sách..." />
                <button id="btn-search" class="search-btn">
                    <i class="fas fa-search"></i> Tìm
                </button>
            </div>

            <div id="search-result" class="search-result">
            </div>
        </div>
    </main>
</div>

<script>
// Example: client-side glue for Add button (keeps previous behavior)
document.addEventListener("click", (e) => {
    if (e.target.classList.contains("add-btn")) {
        const list = document.querySelector(".borrow-list-ul");
        const id = e.target.dataset.bookid;
        const title = e.target.dataset.title;

        const li = document.createElement("li");
        li.textContent = id + " – " + title;
        list.appendChild(li);
    }
});

// (Optional) simple demo search: replace with real AJAX in backend
document.getElementById('btn-search').addEventListener('click', () => {
    const q = document.getElementById('book-search').value.trim();
    const result = document.getElementById('search-result');
    result.innerHTML = '';

    if (!q) {
        result.innerHTML = '<p>Nhập ID hoặc tên sách để tìm.</p>';
        return;
    }

    // Demo fake result (replace with real fetch)
    const card = document.createElement('div');
    card.className = 'book-card';
    card.innerHTML = `
        <p><strong>ID:</strong> 3421</p>
        <p><strong>Tựa:</strong> Đắc Nhân Tâm</p>
        <p><strong>Tác giả:</strong> Dale Carnegie</p>
        <p><strong>Còn lại:</strong> 3</p>
        <button class="add-btn" data-bookid="3421" data-title="Đắc Nhân Tâm">Thêm vào phiếu</button>
    `;
    result.appendChild(card);
});
</script>

</body>
</html>