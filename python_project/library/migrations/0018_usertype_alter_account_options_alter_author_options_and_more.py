# Generated by Django 5.2.8 on 2026-01-18 07:38

import datetime
import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('library', '0017_borrow_is_notified_alter_borrow_status'),
    ]

    operations = [
        migrations.CreateModel(
            name='UserType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
            ],
        ),
        migrations.AlterModelOptions(
            name='account',
            options={'verbose_name': 'Quản lý tài khoản', 'verbose_name_plural': 'Quản lý tài khoản'},
        ),
        migrations.AlterModelOptions(
            name='author',
            options={'verbose_name': 'Danh sách tác giả', 'verbose_name_plural': 'Danh sách tác giả'},
        ),
        migrations.AlterModelOptions(
            name='book',
            options={'verbose_name': 'Quản lý sách', 'verbose_name_plural': 'Quản lý sách'},
        ),
        migrations.AlterModelOptions(
            name='borrow',
            options={'verbose_name': 'Quản lý mượn/trả', 'verbose_name_plural': 'Quản lý mượn/trả'},
        ),
        migrations.AlterModelOptions(
            name='category',
            options={'verbose_name': 'Danh sách thể loại', 'verbose_name_plural': 'Danh sách thể loại'},
        ),
        migrations.AlterModelOptions(
            name='publisher',
            options={'verbose_name': 'Danh sách nhà xuất bản', 'verbose_name_plural': 'Danh sách nhà xuất bản'},
        ),
        migrations.RemoveField(
            model_name='account',
            name='role',
        ),
        migrations.AddField(
            model_name='account',
            name='user_type',
            field=models.CharField(choices=[('student', 'Sinh viên'), ('lecturer', 'Giảng viên'), ('staff', 'Cán bộ/Học viên/Cao học'), ('admin', 'Quản trị viên')], default='student', max_length=20, verbose_name='Phân quyền'),
        ),
        migrations.AlterField(
            model_name='account',
            name='account_id',
            field=models.CharField(max_length=64, unique=True, verbose_name='Id tài khoản'),
        ),
        migrations.AlterField(
            model_name='account',
            name='account_name',
            field=models.CharField(max_length=100, verbose_name='Tên tài khoản'),
        ),
        migrations.AlterField(
            model_name='account',
            name='password',
            field=models.CharField(max_length=128, verbose_name='Mật khẩu'),
        ),
        migrations.AlterField(
            model_name='account',
            name='phone',
            field=models.CharField(max_length=20, verbose_name='Số điện thoại'),
        ),
        migrations.AlterField(
            model_name='account',
            name='status',
            field=models.CharField(choices=[('active', 'Kích hoạt'), ('inactive', 'Chưa kích hoạt')], max_length=10, verbose_name='Trạng thái'),
        ),
        migrations.AlterField(
            model_name='account',
            name='username',
            field=models.CharField(max_length=50, verbose_name='Tên đăng nhập'),
        ),
        migrations.AlterField(
            model_name='author',
            name='author_id',
            field=models.AutoField(primary_key=True, serialize=False, verbose_name='Id Tác giả'),
        ),
        migrations.AlterField(
            model_name='author',
            name='author_name',
            field=models.CharField(max_length=100, verbose_name='Tên tác giả'),
        ),
        migrations.AlterField(
            model_name='book',
            name='available',
            field=models.PositiveIntegerField(default=5, verbose_name='Còn lại'),
        ),
        migrations.AlterField(
            model_name='book',
            name='book_id',
            field=models.AutoField(primary_key=True, serialize=False, verbose_name='Id sách'),
        ),
        migrations.AlterField(
            model_name='book',
            name='book_name',
            field=models.CharField(max_length=200, verbose_name='Tên sách'),
        ),
        migrations.AlterField(
            model_name='book',
            name='dateAdd',
            field=models.DateField(auto_now_add=True, verbose_name='Ngày thêm'),
        ),
        migrations.AlterField(
            model_name='book',
            name='description',
            field=models.TextField(blank=True, verbose_name='Mô tả sách'),
        ),
        migrations.AlterField(
            model_name='book',
            name='image',
            field=models.ImageField(blank=True, null=True, upload_to='books/', verbose_name='Ảnh minh họa'),
        ),
        migrations.AlterField(
            model_name='book',
            name='price',
            field=models.PositiveIntegerField(default=0, verbose_name='Giá sách'),
        ),
        migrations.AlterField(
            model_name='book',
            name='publishYear',
            field=models.PositiveIntegerField(blank=True, null=True, verbose_name='Năm xuất bản'),
        ),
        migrations.AlterField(
            model_name='book',
            name='quantity',
            field=models.PositiveIntegerField(default=5, verbose_name='Tồn kho'),
        ),
        migrations.AlterField(
            model_name='borrow',
            name='borrow_date',
            field=models.DateField(default=datetime.date.today, verbose_name='Ngày mượn'),
        ),
        migrations.AlterField(
            model_name='borrow',
            name='borrow_id',
            field=models.AutoField(primary_key=True, serialize=False, verbose_name='Id mượn'),
        ),
        migrations.AlterField(
            model_name='borrow',
            name='damage_status',
            field=models.CharField(choices=[('none', 'Không hư hại'), ('light', 'Hư nhẹ (20%)'), ('heavy', 'Hư nặng (50%)'), ('lost', 'Mất sách (100%)')], default='none', max_length=10, verbose_name='Trạng thái sách'),
        ),
        migrations.AlterField(
            model_name='borrow',
            name='due_date',
            field=models.DateField(blank=True, null=True, verbose_name='Ngày hết hạn'),
        ),
        migrations.AlterField(
            model_name='borrow',
            name='fine',
            field=models.PositiveIntegerField(default=0, verbose_name='Tiền phạt'),
        ),
        migrations.AlterField(
            model_name='borrow',
            name='is_notified',
            field=models.BooleanField(default=False, verbose_name='Nhận thông báo'),
        ),
        migrations.AlterField(
            model_name='borrow',
            name='return_date',
            field=models.DateField(blank=True, null=True, verbose_name='Ngày trả'),
        ),
        migrations.AlterField(
            model_name='borrow',
            name='status',
            field=models.CharField(choices=[('reserved', 'Đã đặt trước'), ('borrowed', 'Đang mượn'), ('returned', 'Đã trả')], default='reserved', max_length=16, verbose_name='Trạng thái'),
        ),
        migrations.AlterField(
            model_name='category',
            name='category_id',
            field=models.AutoField(primary_key=True, serialize=False, verbose_name='Id thể loại'),
        ),
        migrations.AlterField(
            model_name='category',
            name='category_name',
            field=models.CharField(max_length=100, unique=True, verbose_name='Tên thể loại'),
        ),
        migrations.AlterField(
            model_name='publisher',
            name='publish_id',
            field=models.AutoField(primary_key=True, serialize=False, verbose_name='Id nhà xuất bản'),
        ),
        migrations.AlterField(
            model_name='publisher',
            name='publish_name',
            field=models.CharField(max_length=200, unique=True, verbose_name='Tên nhà xuất bản'),
        ),
        migrations.CreateModel(
            name='BorrowRule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('max_days', models.PositiveIntegerField(verbose_name='Thời gian mượn tối đa (ngày)')),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='library.category')),
                ('user_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='library.usertype')),
            ],
            options={
                'unique_together': {('user_type', 'category')},
            },
        ),
    ]
